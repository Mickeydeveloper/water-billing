<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Dashboard - Mickey Water Billing System">
  <meta name="author" content="Mickey Hamza">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Dashboard - Water Billing System</title>
  
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/728/728093.png" type="image/png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap">
  
  <style>
    /* ============================================
       RESET & VARIABLES
       ============================================ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-color: #1e40af;
      --secondary-color: #0ea5e9;
      --success-color: #10b981;
      --error-color: #ef4444;
      --warning-color: #f59e0b;
      --background-light: #f8fafc;
      --background-dark: #0f172a;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --border-color: #e2e8f0;
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
      --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.12);
      --shadow-lg: 0 12px 32px rgba(0, 0, 0, 0.15);
      --border-radius: 16px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --background-light: #0f172a;
        --text-primary: #f1f5f9;
        --text-secondary: #cbd5e1;
        --border-color: #1e293b;
        --primary-color: #3b82f6;
        --secondary-color: #06b6d4;
      }
    }

    /* ============================================
       BODY & LAYOUT
       ============================================ */
    body {
      font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow-x: hidden;
      color: var(--text-primary);
    }

    /* ============================================
       DASHBOARD CONTAINER
       ============================================ */
    .dashboard {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow-lg);
      padding: clamp(1.5rem, 5vw, 2.5rem);
      max-width: 600px;
      width: 100%;
      text-align: center;
      transition: var(--transition);
      opacity: 0;
      visibility: hidden;
      border: 1px solid rgba(255, 255, 255, 0.2);
      animation: fadeInUp 0.5s ease-out 0.2s forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
        visibility: visible;
      }
    }

    /* ============================================
       HEADER SECTION
       ============================================ */
    h1 {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: clamp(1.8rem, 5vw, 2.2rem);
      margin-bottom: 0.5rem;
      font-weight: 700;
      letter-spacing: -0.5px;
    }

    .subtitle {
      color: var(--text-secondary);
      font-size: 1rem;
      margin-bottom: 2rem;
      font-weight: 500;
    }

    /* ============================================
       STATUS BOXES
       ============================================ */
    .status-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .status-box {
      background: #f0faff;
      border: 2px solid var(--primary-color);
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
    }

    .status-box:hover {
      box-shadow: var(--shadow-md);
      transform: translateY(-4px);
      border-color: var(--secondary-color);
    }

    .status-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .status-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      font-weight: 600;
      letter-spacing: 0.5px;
      margin-bottom: 0.5rem;
    }

    .status-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
    }

    /* ============================================
       INFORMATION SECTION
       ============================================ */
    .info-section {
      background: rgba(16, 185, 129, 0.05);
      border: 1px solid var(--border-color);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 2rem;
      text-align: left;
    }

    .info-section h3 {
      color: var(--success-color);
      margin-bottom: 1rem;
      font-weight: 600;
    }

    .info-section ul {
      list-style: none;
      padding: 0;
    }

    .info-section li {
      padding: 0.5rem 0;
      color: var(--text-secondary);
      display: flex;
      gap: 0.75rem;
    }

    .info-section li::before {
      content: "‚úì";
      color: var(--success-color);
      font-weight: 700;
      min-width: 1.5rem;
    }

    /* ============================================
       BUTTON GRID
       ============================================ */
    .button-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    a.btn,
    button {
      padding: 1rem;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      border: none;
      border-radius: 8px;
      font-size: 0.95rem;
      font-weight: 700;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      transition: var(--transition);
      text-decoration: none;
      display: inline-block;
      font-family: 'Poppins', sans-serif;
    }

    a.btn:hover,
    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(30, 64, 175, 0.3);
    }

    a.btn:active,
    button:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: linear-gradient(135deg, #6366f1, #8b5cf6) !important;
    }

    .btn-secondary:hover {
      background: linear-gradient(135deg, #8b5cf6, #a855f7) !important;
    }

    .btn-success {
      background: linear-gradient(135deg, var(--success-color), #059669) !important;
    }

    .btn-success:hover {
      background: linear-gradient(135deg, #059669, #047857) !important;
    }

    /* ============================================
       FOOTER
       ============================================ */
    .footer {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border-color);
      color: var(--text-secondary);
      font-size: 0.85rem;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: var(--primary-color);
      text-decoration: none;
      transition: var(--transition);
    }

    .footer-links a:hover {
      text-decoration: underline;
    }

    /* ============================================
       ANIMATIONS
       ============================================ */
    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }

    .loading {
      animation: pulse 1.5s ease-in-out infinite;
    }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width: 480px) {
      body {
        padding: 15px;
      }

      .dashboard {
        padding: 1.5rem;
      }

      h1 {
        font-size: 1.6rem;
      }

      .status-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }

      .button-grid {
        grid-template-columns: 1fr;
      }

      .status-box {
        padding: 1rem;
      }

      .status-value {
        font-size: 1.25rem;
      }
    }
  </style>
</head>
<body>
  <div class="dashboard" id="dashboard">
    <!-- Header -->
    <h1>üíß Water Billing System</h1>
    <p class="subtitle">Management Dashboard</p>

    <!-- Status Grid -->
    <div class="status-grid">
      <div class="status-box">
        <div class="status-icon">üìã</div>
        <div class="status-label">Total Bills</div>
        <div class="status-value" id="totalBills">0</div>
      </div>

      <div class="status-box">
        <div class="status-icon">üí∞</div>
        <div class="status-label">Total Revenue</div>
        <div class="status-value" id="totalRevenue">TZS 0</div>
      </div>

      <div class="status-box">
        <div class="status-icon">üìä</div>
        <div class="status-label">Avg. Bill</div>
        <div class="status-value" id="avgBill">TZS 0</div>
      </div>

      <div class="status-box">
        <div class="status-icon">üíß</div>
        <div class="status-label">Total Usage</div>
        <div class="status-value" id="totalUsage">0 units</div>
      </div>
    </div>

    <!-- Information Section -->
    <div class="info-section">
      <h3>üìå Quick Guide</h3>
      <ul>
        <li>Create and calculate water bills</li>
        <li>Send bills via SMS directly</li>
        <li>View complete billing history</li>
        <li>Generate monthly reports</li>
        <li>Export data for analysis</li>
      </ul>
    </div>

    <!-- Action Buttons -->
    <div class="button-grid">
      <a href="main.html" class="btn">üìù Create Bill</a>
      <a href="records.html" class="btn btn-success">üìä View History</a>
      <button class="btn btn-secondary" onclick="refreshStats()">üîÑ Refresh</button>
    </div>

    <!-- Footer -->
    <div class="footer">
      <div class="footer-links">
        <a href="main.html">Billing</a>
        <a href="records.html">History</a>
        <a href="#" onclick="showAbout(); return false;">About</a>
      </div>
      <p>&copy; 2026 Mickey Water Billing System. All rights reserved.</p>
    </div>
  </div>

  <script>
    /**
     * Dashboard - Statistics and Quick Access
     * Features:
     * - Display billing statistics
     * - Quick navigation
     * - Real-time data updates
     */

    // ============================================
    // CONSTANTS
    // ============================================
    const LOCAL_STORAGE_KEY = 'mickeyBillingRecords';

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================

    /**
     * Get all records from localStorage
     */
    function getRecords() {
      try {
        return JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY) || '[]');
      } catch (err) {
        console.error('Error loading records:', err);
        return [];
      }
    }

    /**
     * Format currency
     */
    function formatCurrency(value) {
      return Number(value).toLocaleString('en-US', {
        minimumFractionDigits: 0,
        maximumFractionDigits: 2
      });
    }

    /**
     * Calculate and display statistics
     */
    function updateStats() {
      const records = getRecords();

      if (records.length === 0) {
        document.getElementById('totalBills').textContent = '0';
        document.getElementById('totalRevenue').textContent = 'TZS 0';
        document.getElementById('avgBill').textContent = 'TZS 0';
        document.getElementById('totalUsage').textContent = '0 units';
        return;
      }

      const totalRevenue = records.reduce((sum, r) => sum + (r.total || 0), 0);
      const avgBill = records.length > 0 ? totalRevenue / records.length : 0;
      const totalUsage = records.reduce((sum, r) => sum + (r.usage || 0), 0);

      document.getElementById('totalBills').textContent = records.length;
      document.getElementById('totalRevenue').textContent = 'TZS ' + formatCurrency(totalRevenue);
      document.getElementById('avgBill').textContent = 'TZS ' + formatCurrency(avgBill);
      document.getElementById('totalUsage').textContent = totalUsage + ' units';
    }

    /**
     * Show about information
     */
    function showAbout() {
      alert(`Mickey Water Billing System v1.0
      
A modern water billing solution for Tanzania.

Features:
‚Ä¢ Face recognition login
‚Ä¢ Bill calculation & SMS
‚Ä¢ Complete billing history
‚Ä¢ Monthly reports & exports
‚Ä¢ Secure data storage

Developed by: Mickey Hamza
¬© 2026 All Rights Reserved`);
    }

    /**
     * Refresh statistics
     */
    function refreshStats() {
      const dashboard = document.getElementById('dashboard');
      dashboard.classList.add('loading');

      setTimeout(() => {
        updateStats();
        dashboard.classList.remove('loading');
      }, 500);
    }

    // ============================================
    // INITIALIZATION
    // ============================================

    // Show dashboard with animation
    const dashboard = document.getElementById('dashboard');
    setTimeout(() => {
      dashboard.style.opacity = '1';
      dashboard.style.visibility = 'visible';
    }, 100);

    // Load initial statistics
    updateStats();

    // Refresh stats when storage changes
    window.addEventListener('storage', updateStats);

    console.log('Dashboard initialized successfully');
  </script>
</body>
</html>
